{
  "version": 3,
  "sources": ["../../../../../../node_modules/wcs-core/dist/esm/wcs-modal.entry.js"],
  "sourcesContent": ["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-d9de61ce.js';\nimport { i as isFocusable, a as isElementFocused } from './accessibility-069640cf.js';\nimport { i as inheritAriaAttributes, a as inheritAttributes, s as setOrRemoveAttribute, n as isTabKey } from './helpers-ece6a2d3.js';\nconst modalCss = \"wcs-modal{--wcs-modal-backdrop-color:var(--wcs-semantic-color-background-backdrop);--wcs-modal-max-height:80%;--wcs-modal-background-color:var(--wcs-semantic-color-background-surface-primary);--wcs-modal-border-radius:var(--wcs-semantic-border-radius-base);--wcs-modal-padding:calc(3 * var(--wcs-semantic-spacing-base));--wcs-modal-border-width:var(--wcs-semantic-border-width-default);--wcs-modal-border-color:var(--wcs-semantic-color-border-secondary);--wcs-modal-title-margin-bottom:var(--wcs-semantic-spacing-large);--wcs-modal-title-font-size:var(--wcs-semantic-font-size-heading-4);--wcs-modal-title-font-weight:var(--wcs-semantic-font-weight-heavy);--wcs-modal-title-line-height:var(--wcs-semantic-font-line-height-medium);--wcs-modal-actions-margin-top:var(--wcs-semantic-spacing-large);--wcs-modal-width-s:288px;--wcs-modal-width-m:480px;--wcs-modal-width-l:864px;--wcs-modal-width-xl:1200px;z-index:999;position:fixed;top:0;bottom:0;left:0;right:0;display:none;background:var(--wcs-modal-backdrop-color)}wcs-modal[show]{display:flex;height:100vh;width:100vw;align-items:center;justify-content:center}wcs-modal[without-backdrop]{background-color:unset}wcs-modal[without-backdrop] .wcs-modal-container{border:solid var(--wcs-modal-border-width) var(--wcs-modal-border-color)}.wcs-modal-container{max-height:var(--wcs-modal-max-height, 80%);background-color:var(--wcs-modal-background-color);display:grid;grid-template-columns:100%;grid-template-rows:auto 1fr auto;box-sizing:border-box;pointer-events:auto;background-clip:padding-box;border-radius:var(--wcs-modal-border-radius);z-index:20000;padding:var(--wcs-modal-padding)}.wcs-modal-container[data-size=s]{width:var(--wcs-modal-width-s)}.wcs-modal-container[data-size=m]{width:var(--wcs-modal-width-m)}.wcs-modal-container[data-size=l]{width:var(--wcs-modal-width-l)}.wcs-modal-container[data-size=xl]{width:var(--wcs-modal-width-xl)}.wcs-modal-header{margin-bottom:var(--wcs-modal-title-margin-bottom);display:flex;align-items:center;justify-content:space-between}.wcs-modal-header h1{font-size:var(--wcs-modal-title-font-size);font-weight:var(--wcs-modal-title-font-weight);line-height:var(--wcs-modal-title-line-height);margin:0}.wcs-modal-content{overflow-y:var(--wcs-modal-overflow-y, auto)}.wcs-modal-actions{margin-top:var(--wcs-modal-actions-margin-top);display:flex;justify-content:flex-end}\";\nconst WcsModalStyle0 = modalCss;\nconst MODAL_INHERITED_ATTRS = [];\nconst Modal = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.wcsDialogClosed = createEvent(this, \"wcsDialogClosed\", 7);\n    this.inheritedAttributes = {};\n    /**\n     * Give an unique id\n     * @private\n     */\n    this.modalId = modalIds++;\n    /**\n     * This attribute is used to determine whether the show attribute has changed since the last rendering.\n     * This allows us to call the focus method on the first element of the modal when the show attribute changes to true.\n     * This call is made in the componentDidRender method\n     * @private\n     */\n    this.showAttributeChangedMarker = false;\n    /**\n     * This attribute is used to determine if the modal has been closed for the first time since its last activation.\n     * It is set to 'true' when the modal is first closed, and will be reset to 'false' when the modal is shown again.\n     * This state is important for accessibility reasons in order to focus the modal trigger element (like the button\n     * which controls the modal)\n     *\n     * @private\n     */\n    this.hasBeenClosedBefore = false;\n    this.withoutBackdrop = false;\n    this.show = false;\n    this.showCloseButton = false;\n    this.closeButtonAriaLabel = 'Fermer';\n    this.size = 'm';\n    this.hideActions = false;\n    this.modalTriggerControlsId = undefined;\n    this.initialFocusElementId = undefined;\n    this.disableAutoFocus = false;\n  }\n  componentWillLoad() {\n    if (!this.modalTriggerControlsId) {\n      console.warn('wcs-modal: You must provide the modal-trigger-controls-id attribute to the modal to make it to work properly');\n    }\n    this.inheritedAttributes = Object.assign(Object.assign({}, inheritAriaAttributes(this.el)), inheritAttributes(this.el, MODAL_INHERITED_ATTRS));\n  }\n  componentDidLoad() {\n    this.updateFocusableElements();\n  }\n  componentDidRender() {\n    var _a;\n    this.updateFocusableElements();\n    if (this.showAttributeChangedMarker) {\n      this.showAttributeChangedMarker = false;\n      if (this.disableAutoFocus) {\n        return;\n      }\n      if (!this.initialFocusElementId) {\n        (_a = this.firstFocusableElement) === null || _a === void 0 ? void 0 : _a.focus();\n      } else {\n        const modalElementToFocusOnOpening = document.getElementById(this.initialFocusElementId);\n        if (!modalElementToFocusOnOpening) {\n          console.warn(`wcs-modal: Unable to focus element - ID '${this.initialFocusElementId}' not found in DOM`);\n        }\n        modalElementToFocusOnOpening === null || modalElementToFocusOnOpening === void 0 ? void 0 : modalElementToFocusOnOpening.focus();\n      }\n    }\n  }\n  async setAriaAttribute(attr, value) {\n    setOrRemoveAttribute(this.nativeDivDialog, attr, value);\n  }\n  onShowChange() {\n    if (this.show) {\n      this.hasBeenClosedBefore = false;\n      this.showAttributeChangedMarker = true;\n    } else {\n      // if we already made actions when the modal was firstly closed, we do nothing\n      if (this.hasBeenClosedBefore) {\n        return;\n      }\n      this.hasBeenClosedBefore = true;\n      if (this.modalTriggerControlsId) {\n        const modalTriggerControlsHtmlElement = document.getElementById(this.modalTriggerControlsId);\n        if (!modalTriggerControlsHtmlElement) {\n          console.warn(`wcs-modal: Element with id '${this.modalTriggerControlsId}' could not be found`);\n        }\n        modalTriggerControlsHtmlElement === null || modalTriggerControlsHtmlElement === void 0 ? void 0 : modalTriggerControlsHtmlElement.focus();\n      }\n    }\n  }\n  updateFocusableElements() {\n    const focusableElements = Array.from(this.el.querySelectorAll('*')).filter(element => isFocusable(element));\n    this.firstFocusableElement = focusableElements.length > 0 && focusableElements[0];\n    this.lastFocusableElement = focusableElements.length > 0 && focusableElements[focusableElements.length - 1];\n  }\n  close() {\n    // If the modal isn't shown, we don't do anything\n    if (this.show) {\n      this.show = false;\n      this.wcsDialogClosed.emit();\n    }\n  }\n  onKeyDown(event) {\n    if (this.show && this.showCloseButton && event.key === 'Escape') {\n      this.close();\n    }\n    if (this.show) {\n      if (isTabKey(event)) {\n        this.updateFocusableElements(); // XXX: maybe a performance issue\n        const firstElement = this.firstFocusableElement;\n        const lastElement = this.lastFocusableElement;\n        if (event.shiftKey && isElementFocused(firstElement)) {\n          event.preventDefault();\n          lastElement.focus();\n        } else if (!event.shiftKey && isElementFocused(lastElement)) {\n          event.preventDefault();\n          firstElement.focus();\n        }\n      }\n    }\n  }\n  onCloseButtonClick(_) {\n    this.close();\n  }\n  handleSlotContentChange() {\n    this.updateFocusableElements();\n  }\n  render() {\n    const modalTitleId = `wcs-modal-title-${this.modalId}`;\n    return h(Host, {\n      key: '1b9a4d86bf1e97ef7ef988b7355b75eb5f344ca8'\n    }, h(\"div\", Object.assign({\n      key: 'ab5e3938796e950e9e3aa81cd35a723d6429a8e6',\n      class: \"wcs-modal-container\",\n      \"data-size\": this.size,\n      \"aria-modal\": true,\n      role: \"dialog\",\n      \"aria-labelledby\": modalTitleId,\n      ref: el => this.nativeDivDialog = el\n    }, this.inheritedAttributes), h(\"div\", {\n      key: '80fe453c1ffd3453832c799f131d50c97d37954f',\n      class: \"wcs-modal-header\"\n    }, h(\"h1\", {\n      key: '632853fdbc254e92167fafd022b7f0d392b861bc',\n      id: modalTitleId\n    }, h(\"slot\", {\n      key: 'b84db0d064adae8e50a013315fd3c593a39a6f99',\n      name: \"header\"\n    })), this.showCloseButton && h(\"wcs-button\", {\n      key: '27bf915ff1ccebab3de363d8dae6914de112aa7b',\n      shape: \"round\",\n      mode: \"clear\",\n      id: \"wcs-modal-close-button\",\n      \"aria-label\": this.closeButtonAriaLabel,\n      onClick: $event => this.onCloseButtonClick($event)\n    }, h(\"wcs-mat-icon\", {\n      key: 'adacfb9e0b2c435d97f35e8423dd21f4bb534212',\n      icon: \"close\"\n    }))), h(\"div\", {\n      key: '33757197132d566f2ade4ea1c1cf36bc914702b2',\n      class: \"wcs-modal-content\"\n    }, h(\"slot\", {\n      key: 'c742e77c50cccc69435c40cf845fa6280a1a7063',\n      onSlotchange: () => this.handleSlotContentChange()\n    })), !this.hideActions && h(\"div\", {\n      key: 'e98977493e4fc5461fbab1b67d609a1a956b7fbf',\n      class: \"wcs-modal-actions\"\n    }, h(\"slot\", {\n      key: '56168022f0de471106a15b03f7b16c3c6d3cbc1b',\n      name: \"actions\"\n    }))));\n  }\n  get el() {\n    return getElement(this);\n  }\n  static get watchers() {\n    return {\n      \"show\": [\"onShowChange\"]\n    };\n  }\n};\nlet modalIds = 0;\nModal.style = WcsModalStyle0;\nexport { Modal as wcs_modal };\n\n"],
  "mappings": "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",
  "names": []
}
